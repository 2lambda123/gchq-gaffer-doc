## Timestamps

Gaffer contains a [time-library](https://github.com/gchq/Gaffer/tree/master/library/time-library) containing some simple properties which allow sets of timestamps to be stored on entities and edges. There are two properties:

- [`RBMBackedTimestampSet`](https://github.com/gchq/Gaffer/blob/master/library/time-library/src/main/java/uk/gov/gchq/gaffer/time/RBMBackedTimestampSet.java): When this is created, a [TimeBucket](https://github.com/gchq/Gaffer/blob/master/core/common-util/src/main/java/uk/gov/gchq/gaffer/commonutil/CommonTimeUtil.java) is specified, e.g. minute. When a timestamp is added, it is truncated to the nearest start of a bucket (e.g. if the bucket is a minute then the seconds are removed) and then added to the set. Internally the timestamps are stored in a [Roaring Bitmap](http://roaringbitmap.org/).
- [`BoundedTimestampSet`](https://github.com/gchq/Gaffer/blob/master/library/time-library/src/main/java/uk/gov/gchq/gaffer/time/BoundedTimestampSet.java): This is similar to the above set, except that when it is created a maximum size is specified. If the set grows beyond the maximum size, then a random sample of the timestamps of that size is created. This is useful to avoid the size of the set for entities or edges that are very busy growing too large. By retaining a sample, we maintain an indication of when the entity or edge was active, without retaining all the information. The sample is implemented using a [ReservoirLongsUnion](https://github.com/DataSketches/sketches-core/blob/master/src/main/java/com/yahoo/sketches/sampling/ReservoirLongsUnion.java) from the [Datasketches](https://datasketches.github.io/) library.
